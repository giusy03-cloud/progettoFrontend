<div class="login-container d-flex justify-content-center mt-5">
  <div class="card mx-3 position-relative" style="width: 20rem;">
    <!-- Pulsante per tornare alla Home -->
    <a
      routerLink="/home"
      class="btn btn-light position-absolute top-0 end-0 m-2"
      style="z-index: 1;"
    >
      Home
    </a>

    <div class="card-body">
      <!-- Titolo Modernizzato -->
      <h5
        class="card-title text-center fw-bold"
        style="font-size: 1.8rem; color: #6c63ff; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);"
      >
        Accedi
      </h5>

      <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
        <div class="mb-3">
          <label for="username" class="form-label">Nome utente</label>
          <input
            type="text"
            class="form-control"
            id="username"
            placeholder="Inserisci il tuo nome utente"
            [(ngModel)]="loginData.username"
            name="username"
            required
            #username="ngModel"
            [ngClass]="{'is-invalid': username.touched && username.invalid}"
          />
          <div *ngIf="username.touched && username.invalid" class="invalid-feedback">
            <p *ngIf="username.errors?.['required']">Il nome utente è obbligatorio.</p>
          </div>
        </div>

        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <div class="input-group">
            <input
              [type]="passwordVisible ? 'text' : 'password'"
              class="form-control"
              id="password"
              placeholder="Inserisci la tua password"
              [(ngModel)]="loginData.password"
              name="password"
              required
              #password="ngModel"
              [ngClass]="{'is-invalid': password.touched && password.invalid}"
            />
            <span
              class="input-group-text"
              (click)="togglePasswordVisibility()"
              style="cursor: pointer;"
            >
              <i class="fas" [ngClass]="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
            </span>
          </div>
          <div *ngIf="password.touched && password.invalid" class="invalid-feedback">
            <p *ngIf="password.errors?.['required']">La password è obbligatoria.</p>
          </div>
        </div>

        <button
          type="submit"
          class="btn btn-primary w-100"
          [disabled]="loginForm.invalid || loading"
        >
          Accedi
        </button>

        <div *ngIf="loading" class="d-flex justify-content-center my-3">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Caricamento...</span>
          </div>
        </div>

        <a routerLink="/register" class="btn btn-link w-100 mt-3">Non hai un account? Registrati</a>
      </form>
    </div>
  </div>
</div>
